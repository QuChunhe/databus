<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
        "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
    <import resource="mysql_listener.xml" />
    <import resource="mysql_receiver_replication.xml" />
    <import resource="redis_receiver4mysql.xml" />
    <import resource="executor.xml" />

    <bean id="startup" class="databus.application.Startup" scope="singleton">
        <property name="services">
            <list>
                <ref bean="publisher"/>
                <ref bean="subscriber"/>
            </list>
        </property>
    </bean>

    <bean id="publisher" class="databus.network.kafka.KafkaPublisher" scope="singleton">
        <property name="configFile" value="conf/kafka_publisher.properties"/>
        <property name="listeners">
            <list>
                <ref bean="mysqlListener"/>
            </list>
        </property>
    </bean>

    <bean id="subscriber" class="databus.network.kafka.KafkaSubscriber" scope="singleton">

        <property name="configFile" value="conf/kafka_subscriber.properties"/>
        <property name="executorService" ref="executor"/>
        <property name="receiversMap">
            <map>
                <entry key="test-mysql">
                    <list>
                        <ref bean="mysqlReceiver"/>
                        <!-- <ref bean="redisReceiver" /> -->
                    </list>
                </entry>
            </map>
        </property>
    </bean>


</beans>