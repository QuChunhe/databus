<?xml version="1.0" encoding="UTF-8" ?>

<configuration>

<publisher> 
    <class>databus.network.kafka.KafkaPublisher</class>
    <kafka>
        <server>127.0.0.1:9092</server>
        <acks>1</acks>
    </kafka>

    <listener>
        <class>databus.listener.mysql.MysqlListener</class>
        <mysql>
            <host>127.0.0.1</host>
            <port>3306</port>
            <user>root</user>
            <password>quchunhe</password>
            <serverId>3</serverId>
            <permittedTables>test.user</permittedTables>
            <binlogFileName>master-bin.000087</binlogFileName>
            <position>582</position>
        </mysql>
    </listener> 
</publisher>

<subscriber>
    <class>databus.network.kafka.KafkaBatchSubscribers</class>
    <kafka>
        <consumerConfig>conf/kafka_consumer.properties</consumerConfig>
        <maxWorkerThreadPoolSize>6</maxWorkerThreadPoolSize>
        <pollingThread>
           <host>127.0.0.1:9092</host>
           <number>4</number>
        </pollingThread>
        <recordSaveThreshold>1</recordSaveThreshold>
        <taskCapacity>1000</taskCapacity>
        <fromBeginning>true</fromBeginning>
    </kafka> 
  
    <receiver>
        <class>databus.receiver.redis.RedisSlave4Mysql</class>
        <remoteTopic>127.0.0.1:9092/MYSQL/1/test</remoteTopic>
        <redis>
            <host>127.0.0.1</host>
            <port>6379</port>
            <timeout>40</timeout>
            <maxTotal>10</maxTotal>
            <maxIdle>3</maxIdle>
            <minIdle>1</minIdle>
        </redis>
       <system>adm</system>
       <replicatedTables>
         <user>age, position, salary, time1, time2</user>
         <book>name, isdn, author</book>
       </replicatedTables>
    </receiver>
</subscriber>

</configuration>
